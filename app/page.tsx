"use client"

import { useState, useEffect } from "react"
import { Sun, Moon, Calendar, Book, MapPin, Clock, ChevronDown, ChevronUp, Headphones } from "lucide-react"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { Progress } from "@/components/ui/progress"
import { QuranReader } from "@/components/quran-reader"

export default function RamadanSchedule() {
  const [isWorkDay, setIsWorkDay] = useState(true)
  const [userLocation, setUserLocation] = useState<string | null>(null)
  const [currentDay, setCurrentDay] = useState(1)
  const [expandedItems, setExpandedItems] = useState<Record<string, boolean>>({})
  const [expandedAdhkar, setExpandedAdhkar] = useState<Record<string, boolean>>({})
  const [expandedQuranDay, setExpandedQuranDay] = useState<number | null>(null)
  const [prayerTimes, setPrayerTimes] = useState<Record<string, string> | null>(null);

  useEffect(() => {
    // Get user's location
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        async (position) => {
          const { latitude, longitude } = position.coords
          try {
            // Get location name from coordinates
            const response = await fetch(
              `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&accept-language=ar`,
            )
            const data = await response.json()
            setUserLocation(data.address.city || data.address.town || data.address.state)

            // Get prayer times based on location
            const date = new Date()
            const month = date.getMonth() + 1
            const year = date.getFullYear()
            const prayerResponse = await fetch(
              `https://api.aladhan.com/v1/calendar/${year}/${month}?latitude=${latitude}&longitude=${longitude}&method=4`,
            )
            const prayerData = await prayerResponse.json()
            setPrayerTimes(prayerData.data[date.getDate() - 1].timings)
          } catch (error) {
            console.error("Error fetching location data:", error)
            setUserLocation("ุบูุฑ ูุนุฑูู")
          }
        },
        () => {
          setUserLocation("ุบูุฑ ูุนุฑูู")
        },
      )
    } else {
      setUserLocation("ุบูุฑ ูุนุฑูู")
    }
  }, [])

  const workSchedule = [
    { time: "4:00 AM - 5:00 AM ๐ ูุจู ุงููุฌุฑ", activities: ["ููุงู ุงูููู", "ูุฑุงุกุฉ 4 ุตูุญุงุช", "ุณุญูุฑ ุตุญู", "ุตูุงุฉ ุงููุชุฑ"] },
    { time: "5:00 AM - 6:00 AM ๐ ุจุนุฏ ุงููุฌุฑ", activities: ["ุตูุงุฉ ุงููุฌุฑ", "ุฃุฐูุงุฑ ุงูุตุจุงุญ", "ูุฑุงุกุฉ 4 ุตูุญุงุช", "ุฑุงุญุฉ"] },
    {
      time: "8:00 AM - 4:00 PM ๐ ุฃุซูุงุก ุงูุนูู",
      activities: ["ูุฑุงุกุฉ 4 ุตูุญุงุช ูู ุงูุงุณุชุฑุงุญุงุช", "ุตูุงุฉ ุงูุธูุฑ ูุงูุนุตุฑ", "ุงูุฏุนุงุก ูุงูุงุณุชุบูุงุฑ"],
    },
    { time: "4:00 PM - 6:00 PM ๐ก ุจุนุฏ ุงูุฏูุงู", activities: ["ูููููุฉ ูุตูุฑุฉ", "ูุฑุงุกุฉ 5 ุตูุญุงุช"] },
    { time: "6:30 PM - 7:00 PM ๐ ูุจู ุงููุบุฑุจ", activities: ["ุงูุฏุนุงุก ูุจู ุงููุทูุฑ", "ุชุญุถูุฑ ุงููุทูุฑ"] },
    { time: "7:00 PM - 8:00 PM ๐ ุจุนุฏ ุงูุฅูุทุงุฑ ูุงููุบุฑุจ", activities: ["ุตูุงุฉ ุงููุบุฑุจ", "ูุฑุงุกุฉ 5 ุตูุญุงุช", "ุฑุงุญุฉ"] },
    { time: "8:30 PM - 10:00 PM ๐ ุจุนุฏ ุงูุนุดุงุก ูุงูุชุฑุงููุญ", activities: ["ุตูุงุฉ ุงูุนุดุงุก ูุงูุชุฑุงููุญ", "ูุฑุงุกุฉ 4 ุตูุญุงุช"] },
    { time: "10:30 PM - 11:00 PM ๐ ูุจู ุงูููู", activities: ["ุฅููุงู ุงููุฑุฏ ุงููููู", "ุฃุฐูุงุฑ ุงูููู"] },
  ]

  const weekendSchedule = [
    { time: "4:00 AM - 5:30 AM ๐ ูุจู ุงููุฌุฑ", activities: ["ููุงู ุงูููู", "ูุฑุงุกุฉ 6 ุตูุญุงุช", "ุณุญูุฑ ุตุญู"] },
    { time: "5:30 AM - 6:30 AM ๐ ุจุนุฏ ุงููุฌุฑ", activities: ["ุตูุงุฉ ุงููุฌุฑ", "ุฃุฐูุงุฑ ุงูุตุจุงุญ", "ูุฑุงุกุฉ 6 ุตูุญุงุช"] },
    { time: "7:00 AM - 11:00 AM โ๏ธ ุงูุตุจุงุญ ุงูุญุฑ", activities: ["ุฑุงุญุฉ", "ูุฑุงุกุฉ 6 ุตูุญุงุช"] },
    { time: "11:00 AM - 1:00 PM โ๏ธ ููุชุตู ุงูููุงุฑ", activities: ["ุตูุงุฉ ุงูุธูุฑ", "ูุฑุงุกุฉ 6 ุตูุญุงุช"] },
    { time: "1:00 PM - 4:00 PM โณ ุจุนุฏ ุงูุธูุฑ", activities: ["ูููููุฉ ูุตูุฑุฉ", "ูุฑุงุกุฉ 6 ุตูุญุงุช"] },
    { time: "4:00 PM - 6:00 PM ๐ ุงูุนุตุฑ", activities: ["ุตูุงุฉ ุงูุนุตุฑ", "ุฌูุณุฉ ุฐูุฑ", "ูุฑุงุกุฉ 5 ุตูุญุงุช"] },
    { time: "6:30 PM - 7:00 PM ๐ ูุจู ุงููุบุฑุจ", activities: ["ุงูุฏุนุงุก ูุจู ุงููุทูุฑ", "ุชุญุถูุฑ ุงููุทูุฑ"] },
    { time: "7:00 PM - 8:00 PM ๐ ุจุนุฏ ุงูุฅูุทุงุฑ ูุงููุบุฑุจ", activities: ["ุตูุงุฉ ุงููุบุฑุจ", "ุฑุงุญุฉ"] },
    { time: "8:30 PM - 10:00 PM ๐ ุจุนุฏ ุงูุนุดุงุก ูุงูุชุฑุงููุญ", activities: ["ุตูุงุฉ ุงูุนุดุงุก ูุงูุชุฑุงููุญ", "ูุฑุงุกุฉ 6 ุตูุญุงุช"] },
    { time: "10:30 PM - 11:30 PM ๐ ูุจู ุงูููู", activities: ["ุฃุฐูุงุฑ ุงูููู", "ุงูููู ูุจูุฑูุง"] },
  ]

  const dailyAdhkar = [
    {
      title: "ุฃุฐูุงุฑ ุงูุตุจุงุญ",
      items: [
        "ุณุจุญุงู ุงููู ูุจุญูุฏู ุนุฏุฏ ุฎููู ูุฑุถุง ููุณู ูุฒูุฉ ุนุฑุดู ููุฏุงุฏ ูููุงุชู (ุซูุงุซ ูุฑุงุช)",
        "ุงูููู ุฅูู ุฃุนูุฐ ุจู ูู ุงููู ูุงูุญุฒูุ ูุฃุนูุฐ ุจู ูู ุงูุนุฌุฒ ูุงููุณูุ ูุฃุนูุฐ ุจู ูู ุงูุฌุจู ูุงูุจุฎูุ ูุฃุนูุฐ ุจู ูู ุบูุจุฉ ุงูุฏูู ูููุฑ ุงูุฑุฌุงู (ุซูุงุซ ูุฑุงุช)",
        "ุฃุนูุฐ ุจูููุงุช ุงููู ุงูุชุงูุงุช ูู ุดุฑ ูุง ุฎูู (ุซูุงุซ ูุฑุงุช)",
        "ุงูููู ุจู ุฃุตุจุญูุง ูุจู ุฃูุณููุง ูุจู ูุญูุง ูุจู ูููุช ูุฅููู ุงููุดูุฑ",
        "ุฃุตุจุญูุง ุนูู ูุทุฑุฉ ุงูุฅุณูุงู ููููุฉ ุงูุฅุฎูุงุต ูุฏูู ูุจููุง ูุญูุฏ ุตูู ุงููู ุนููู ูุณูู ูููุฉ ุฃุจููุง ุฅุจุฑุงููู ุญูููุงู ูุณููุงู ููุง ูุงู ูู ุงููุดุฑููู",
        "ุณุจุญุงู ุงููู ูุจุญูุฏู (ูุงุฆุฉ ูุฑุฉ)",
        "ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑ (ูุงุฆุฉ ูุฑุฉ)",
      ],
    },
    {
      title: "ุฃุฐูุงุฑ ุงููุณุงุก",
      items: [
        "ุฃุนูุฐ ุจุงููู ูู ุงูุดูุทุงู ุงูุฑุฌูู: ุงููู ูุง ุฅูู ุฅูุง ูู ุงูุญู ุงููููู ูุง ุชุฃุฎุฐู ุณูุฉ ููุง ููู... (ุขูุฉ ุงููุฑุณู)",
        "ุฃุนูุฐ ุจุงููู ูู ุงูุดูุทุงู ุงูุฑุฌูู: ูู ูู ุงููู ุฃุญุฏ... (ุงูุฅุฎูุงุต ูุงููุนูุฐุชููุ ุซูุงุซ ูุฑุงุช)",
        "ุฃูุณููุง ูุฃูุณู ุงูููู ูููุ ูุงูุญูุฏ ูููุ ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑ...",
        "ุงูููู ูุง ุฃูุณู ุจู ูู ูุนูุฉ ุฃู ุจุฃุญุฏ ูู ุฎููู ูููู ูุญุฏู ูุง ุดุฑูู ููุ ููู ุงูุญูุฏ ููู ุงูุดูุฑ",
        "ุงูููู ุฅูู ุฃูุณูุช ุฃุดูุฏูุ ูุฃุดูุฏ ุญููุฉ ุนุฑุดูุ ูููุงุฆูุชูุ ูุฌููุน ุฎูููุ ุฃูู ุฃูุช ุงููู ูุง ุฅูู ุฅูุง ุฃูุช ูุญุฏู ูุง ุดุฑูู ููุ ูุฃู ูุญูุฏุงู ุนุจุฏู ูุฑุณููู (ุฃุฑุจุน ูุฑุงุช)",
        "ุงูููู ุฅูู ุฃุนูุฐ ุจู ูู ุงููู ูุงูุญุฒูุ ูุฃุนูุฐ ุจู ูู ุงูุนุฌุฒ ูุงููุณูุ ูุฃุนูุฐ ุจู ูู ุงูุฌุจู ูุงูุจุฎูุ ูุฃุนูุฐ ุจู ูู ุบูุจุฉ ุงูุฏูู ูููุฑ ุงูุฑุฌุงู",
      ],
    },
  ]

  const prayerAdhkar = [
    {
      prayer: "ุงููุฌุฑ",
      adhkar: [
        "ุฃุณุชุบูุฑ ุงููู (ุซูุงุซ ูุฑุงุช)",
        "ุงูููู ุฃูุช ุงูุณูุงู ูููู ุงูุณูุงู ุชุจุงุฑูุช ูุง ุฐุง ุงูุฌูุงู ูุงูุฅูุฑุงู",
        "ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑุ ุงูููู ูุง ูุงูุน ููุง ุฃุนุทูุชุ ููุง ูุนุทู ููุง ููุนุชุ ููุง ูููุน ุฐุง ุงูุฌุฏ ููู ุงูุฌุฏ",
        "ุณุจุญุงู ุงููู (ูฃูฃ ูุฑุฉ)ุ ุงูุญูุฏ ููู (ูฃูฃ ูุฑุฉ)ุ ุงููู ุฃูุจุฑ (ูฃูฃ ูุฑุฉ)ุ ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑ (ูุฑุฉ ูุงุญุฏุฉ)",
        "ุงูููู ุฅูู ุฃุณุฃูู ุนููุงู ูุงูุนุงูุ ูุฑุฒูุงู ุทูุจุงูุ ูุนููุงู ูุชูุจูุงู",
      ],
    },
    {
      prayer: "ุงูุธูุฑ",
      adhkar: [
        "ุฃุณุชุบูุฑ ุงููู (ุซูุงุซ ูุฑุงุช)",
        "ุงูููู ุฃูุช ุงูุณูุงู ูููู ุงูุณูุงู ุชุจุงุฑูุช ูุง ุฐุง ุงูุฌูุงู ูุงูุฅูุฑุงู",
        "ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑุ ุงูููู ูุง ูุงูุน ููุง ุฃุนุทูุชุ ููุง ูุนุทู ููุง ููุนุชุ ููุง ูููุน ุฐุง ุงูุฌุฏ ููู ุงูุฌุฏ",
        "ุณุจุญุงู ุงููู (ูฃูฃ ูุฑุฉ)ุ ุงูุญูุฏ ููู (ูฃูฃ ูุฑุฉ)ุ ุงููู ุฃูุจุฑ (ูฃูฃ ูุฑุฉ)ุ ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑ (ูุฑุฉ ูุงุญุฏุฉ)",
      ],
    },
    {
      prayer: "ุงูุนุตุฑ",
      adhkar: [
        "ุฃุณุชุบูุฑ ุงููู (ุซูุงุซ ูุฑุงุช)",
        "ุงูููู ุฃูุช ุงูุณูุงู ูููู ุงูุณูุงู ุชุจุงุฑูุช ูุง ุฐุง ุงูุฌูุงู ูุงูุฅูุฑุงู",
        "ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑุ ุงูููู ูุง ูุงูุน ููุง ุฃุนุทูุชุ ููุง ูุนุทู ููุง ููุนุชุ ููุง ูููุน ุฐุง ุงูุฌุฏ ููู ุงูุฌุฏ",
        "ุณุจุญุงู ุงููู (ูฃูฃ ูุฑุฉ)ุ ุงูุญูุฏ ููู (ูฃูฃ ูุฑุฉ)ุ ุงููู ุฃูุจุฑ (ูฃูฃ ูุฑุฉ)ุ ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑ (ูุฑุฉ ูุงุญุฏุฉ)",
        "ุงูููู ุฅูู ุฃุนูุฐ ุจู ูู ุนุฐุงุจ ุฌูููุ ููู ุนุฐุงุจ ุงููุจุฑุ ููู ูุชูุฉ ุงููุญูุง ูุงูููุงุชุ ููู ุดุฑ ูุชูุฉ ุงููุณูุญ ุงูุฏุฌุงู",
      ],
    },
    {
      prayer: "ุงููุบุฑุจ",
      adhkar: [
        "ุฃุณุชุบูุฑ ุงููู (ุซูุงุซ ูุฑุงุช)",
        "ุงูููู ุฃูุช ุงูุณูุงู ูููู ุงูุณูุงู ุชุจุงุฑูุช ูุง ุฐุง ุงูุฌูุงู ูุงูุฅูุฑุงู",
        "ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑุ ุงูููู ูุง ูุงูุน ููุง ุฃุนุทูุชุ ููุง ูุนุทู ููุง ููุนุชุ ููุง ูููุน ุฐุง ุงูุฌุฏ ููู ุงูุฌุฏ",
        "ุณุจุญุงู ุงููู (ูฃูฃ ูุฑุฉ)ุ ุงูุญูุฏ ููู (ูฃูฃ ูุฑุฉ)ุ ุงููู ุฃูุจุฑ (ูฃูฃ ูุฑุฉ)ุ ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑ (ูุฑุฉ ูุงุญุฏุฉ)",
        "ุจุณู ุงููู ุงูุฑุญูู ุงูุฑุญูู: ูู ูู ุงููู ุฃุญุฏ... (ุงูุฅุฎูุงุต ูุงููุนูุฐุชููุ ุซูุงุซ ูุฑุงุช)",
      ],
    },
    {
      prayer: "ุงูุนุดุงุก",
      adhkar: [
        "ุฃุณุชุบูุฑ ุงููู (ุซูุงุซ ูุฑุงุช)",
        "ุงูููู ุฃูุช ุงูุณูุงู ูููู ุงูุณูุงู ุชุจุงุฑูุช ูุง ุฐุง ุงูุฌูุงู ูุงูุฅูุฑุงู",
        "ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑุ ุงูููู ูุง ูุงูุน ููุง ุฃุนุทูุชุ ููุง ูุนุทู ููุง ููุนุชุ ููุง ูููุน ุฐุง ุงูุฌุฏ ููู ุงูุฌุฏ",
        "ุณุจุญุงู ุงููู (ูฃูฃ ูุฑุฉ)ุ ุงูุญูุฏ ููู (ูฃูฃ ูุฑุฉ)ุ ุงููู ุฃูุจุฑ (ูฃูฃ ูุฑุฉ)ุ ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑ (ูุฑุฉ ูุงุญุฏุฉ)",
      ],
    },
  ]

  // Quran reading plan for Ramadan (30 days)
  const quranPlan = [
    { day: 1, juz: "ุงูุฌุฒุก ุงูุฃูู", pages: "1-20", surahs: "ุงููุงุชุญุฉ - ุงูุจูุฑุฉ (ุขูุฉ 141)" },
    { day: 2, juz: "ุงูุฌุฒุก ุงูุซุงูู", pages: "21-40", surahs: "ุงูุจูุฑุฉ (142-252)" },
    { day: 3, juz: "ุงูุฌุฒุก ุงูุซุงูุซ", pages: "41-60", surahs: "ุงูุจูุฑุฉ (253) - ุขู ุนูุฑุงู (92)" },
    { day: 4, juz: "ุงูุฌุฒุก ุงูุฑุงุจุน", pages: "61-80", surahs: "ุขู ุนูุฑุงู (93-200)" },
    { day: 5, juz: "ุงูุฌุฒุก ุงูุฎุงูุณ", pages: "81-100", surahs: "ุงููุณุงุก (1-147)" },
    { day: 6, juz: "ุงูุฌุฒุก ุงูุณุงุฏุณ", pages: "101-120", surahs: "ุงููุณุงุก (148) - ุงููุงุฆุฏุฉ (81)" },
    { day: 7, juz: "ุงูุฌุฒุก ุงูุณุงุจุน", pages: "121-140", surahs: "ุงููุงุฆุฏุฉ (82) - ุงูุฃูุนุงู (110)" },
    { day: 8, juz: "ุงูุฌุฒุก ุงูุซุงูู", pages: "141-160", surahs: "ุงูุฃูุนุงู (111) - ุงูุฃุนุฑุงู (87)" },
    { day: 9, juz: "ุงูุฌุฒุก ุงูุชุงุณุน", pages: "161-180", surahs: "ุงูุฃุนุฑุงู (88-206)" },
    { day: 10, juz: "ุงูุฌุฒุก ุงูุนุงุดุฑ", pages: "181-200", surahs: "ุงูุฃููุงู - ุงูุชูุจุฉ (92)" },
    { day: 11, juz: "ุงูุฌุฒุก ุงูุญุงุฏู ุนุดุฑ", pages: "201-220", surahs: "ุงูุชูุจุฉ (93) - ููุฏ (5)" },
    { day: 12, juz: "ุงูุฌุฒุก ุงูุซุงูู ุนุดุฑ", pages: "221-240", surahs: "ููุฏ (6) - ููุณู (52)" },
    { day: 13, juz: "ุงูุฌุฒุก ุงูุซุงูุซ ุนุดุฑ", pages: "241-260", surahs: "ููุณู (53) - ุฅุจุฑุงููู (52)" },
    { day: 14, juz: "ุงูุฌุฒุก ุงูุฑุงุจุน ุนุดุฑ", pages: "261-280", surahs: "ุงูุญุฌุฑ - ุงููุญู (128)" },
    { day: 15, juz: "ุงูุฌุฒุก ุงูุฎุงูุณ ุนุดุฑ", pages: "281-300", surahs: "ุงูุฅุณุฑุงุก - ุงูููู (74)" },
    { day: 16, juz: "ุงูุฌุฒุก ุงูุณุงุฏุณ ุนุดุฑ", pages: "301-320", surahs: "ุงูููู (75) - ุทู (135)" },
    { day: 17, juz: "ุงูุฌุฒุก ุงูุณุงุจุน ุนุดุฑ", pages: "321-340", surahs: "ุงูุฃูุจูุงุก - ุงูุญุฌ (78)" },
    { day: 18, juz: "ุงูุฌุฒุก ุงูุซุงูู ุนุดุฑ", pages: "341-360", surahs: "ุงููุคูููู - ุงููุฑูุงู (20)" },
    { day: 19, juz: "ุงูุฌุฒุก ุงูุชุงุณุน ุนุดุฑ", pages: "361-380", surahs: "ุงููุฑูุงู (21) - ุงูููู (55)" },
    { day: 20, juz: "ุงูุฌุฒุก ุงูุนุดุฑูู", pages: "381-400", surahs: "ุงูููู (56) - ุงูุนููุจูุช (45)" },
    { day: 21, juz: "ุงูุฌุฒุก ุงูุญุงุฏู ูุงูุนุดุฑูู", pages: "401-420", surahs: "ุงูุนููุจูุช (46) - ุงูุฃุญุฒุงุจ (30)" },
    { day: 22, juz: "ุงูุฌุฒุก ุงูุซุงูู ูุงูุนุดุฑูู", pages: "421-440", surahs: "ุงูุฃุญุฒุงุจ (31) - ูุณ (27)" },
    { day: 23, juz: "ุงูุฌุฒุก ุงูุซุงูุซ ูุงูุนุดุฑูู", pages: "441-460", surahs: "ูุณ (28) - ุงูุฒูุฑ (31)" },
    { day: 24, juz: "ุงูุฌุฒุก ุงูุฑุงุจุน ูุงูุนุดุฑูู", pages: "461-480", surahs: "ุงูุฒูุฑ (32) - ูุตูุช (46)" },
    { day: 25, juz: "ุงูุฌุฒุก ุงูุฎุงูุณ ูุงูุนุดุฑูู", pages: "481-500", surahs: "ุงูุดูุฑู - ุงูุฌุงุซูุฉ (37)" },
    { day: 26, juz: "ุงูุฌุฒุก ุงูุณุงุฏุณ ูุงูุนุดุฑูู", pages: "501-520", surahs: "ุงูุฃุญูุงู - ุงูุฐุงุฑูุงุช (30)" },
    { day: 27, juz: "ุงูุฌุฒุก ุงูุณุงุจุน ูุงูุนุดุฑูู", pages: "521-540", surahs: "ุงูุฐุงุฑูุงุช (31) - ุงูุญุฏูุฏ (29)" },
    { day: 28, juz: "ุงูุฌุฒุก ุงูุซุงูู ูุงูุนุดุฑูู", pages: "541-560", surahs: "ุงููุฌุงุฏูุฉ - ุงูุชุญุฑูู (12)" },
    { day: 29, juz: "ุงูุฌุฒุก ุงูุชุงุณุน ูุงูุนุดุฑูู", pages: "561-580", surahs: "ุงูููู - ุงููุฑุณูุงุช (50)" },
    { day: 30, juz: "ุงูุฌุฒุก ุงูุซูุงุซูู", pages: "581-604", surahs: "ุงููุจุฃ - ุงููุงุณ" },
  ]

  const toggleItem = (index: string) => {
    setExpandedItems((prev) => ({
      ...prev,
      [index]: !prev[index],
    }))
  }

  const toggleAdhkar = (index: string) => {
    setExpandedAdhkar((prev) => ({
      ...prev,
      [index]: !prev[index],
    }))
  }

  const toggleQuranDay = (day: number) => {
    setExpandedQuranDay(expandedQuranDay === day ? null : day)
  }

  const formatPrayerTime = (time: string) => {
    if (!time) return ""
    return time.replace(" (EET)", "").replace(" (EEST)", "")
  }

  return (
    <div className="min-h-screen bg-gradient-to-b from-blue-50 to-indigo-50 dark:from-slate-950 dark:to-indigo-950 p-4 md:p-6 lg:p-8 rtl">
      <div className="max-w-4xl mx-auto">
        <header className="text-center mb-8">
          <h1 className="text-3xl md:text-4xl font-bold text-primary mb-2">๐ ุฌุฏูู ุงูุนุจุงุฏุงุช ูู ุฑูุถุงู</h1>
          <p className="text-muted-foreground">ุจุฑูุงูุฌ ุดุงูู ููุนุจุงุฏุงุช ูุงูุฃุฐูุงุฑ ูุฎุชู ุงููุฑุขู ูู ุดูุฑ ุฑูุถุงู ุงููุจุงุฑู</p>

          {userLocation && (
            <div className="flex items-center justify-center mt-4 gap-2">
              <MapPin className="h-4 w-4 text-primary" />
              <span className="text-sm font-medium">ูููุนู: {userLocation}</span>
            </div>
          )}

          {prayerTimes && (
            <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-2 mt-4">
              <Badge variant="outline" className="flex items-center gap-1 justify-center">
                <Clock className="h-3 w-3" /> ุงููุฌุฑ: {formatPrayerTime(prayerTimes.Fajr)}
              </Badge>
              <Badge variant="outline" className="flex items-center gap-1 justify-center">
                <Clock className="h-3 w-3" /> ุงูุธูุฑ: {formatPrayerTime(prayerTimes.Dhuhr)}
              </Badge>
              <Badge variant="outline" className="flex items-center gap-1 justify-center">
                <Clock className="h-3 w-3" /> ุงูุนุตุฑ: {formatPrayerTime(prayerTimes.Asr)}
              </Badge>
              <Badge variant="outline" className="flex items-center gap-1 justify-center">
                <Clock className="h-3 w-3" /> ุงููุบุฑุจ: {formatPrayerTime(prayerTimes.Maghrib)}
              </Badge>
              <Badge variant="outline" className="flex items-center gap-1 justify-center">
                <Clock className="h-3 w-3" /> ุงูุนุดุงุก: {formatPrayerTime(prayerTimes.Isha)}
              </Badge>
            </div>
          )}
        </header>

        <Tabs defaultValue="schedule" className="w-full">
          <TabsList className="grid grid-cols-4 mb-6">
            <TabsTrigger value="schedule" className="flex items-center gap-2">
              <Calendar className="h-4 w-4" />
              <span>ุงูุฌุฏูู ุงููููู</span>
            </TabsTrigger>
            <TabsTrigger value="adhkar" className="flex items-center gap-2">
              <Book className="h-4 w-4" />
              <span>ุงูุฃุฐูุงุฑ</span>
            </TabsTrigger>
            <TabsTrigger value="quran" className="flex items-center gap-2">
              <Book className="h-4 w-4" />
              <span>ุฎุชู ุงููุฑุขู</span>
            </TabsTrigger>
            <TabsTrigger value="quran-reader" className="flex items-center gap-2">
              <Headphones className="h-4 w-4" />
              <span>ูุงุฑุฆ ุงููุฑุขู</span>
            </TabsTrigger>
          </TabsList>

          <TabsContent value="schedule" className="space-y-4">
            <div className="flex justify-center mb-4">
              <Button onClick={() => setIsWorkDay(!isWorkDay)} variant="outline" className="flex items-center gap-2">
                {isWorkDay ? (
                  <>
                    <Sun className="h-4 w-4" />
                    <span>ุนุฑุถ ุฌุฏูู ุงูุนุทูุฉ</span>
                  </>
                ) : (
                  <>
                    <Moon className="h-4 w-4" />
                    <span>ุนุฑุถ ุฌุฏูู ุงูุนูู</span>
                  </>
                )}
              </Button>
            </div>

            <div className="grid gap-4">
              {(isWorkDay ? workSchedule : weekendSchedule).map((item, index) => (
                <Card key={index} className="overflow-hidden transition-all duration-200 hover:shadow-md">
                  <CardHeader
                    className="cursor-pointer p-4 flex flex-row items-center justify-between"
                    onClick={() => toggleItem(`${index}`)}
                  >
                    <CardTitle className="text-base md:text-lg">{item.time}</CardTitle>
                    {expandedItems[`${index}`] ? (
                      <ChevronUp className="h-5 w-5 text-muted-foreground" />
                    ) : (
                      <ChevronDown className="h-5 w-5 text-muted-foreground" />
                    )}
                  </CardHeader>
                  {expandedItems[`${index}`] && (
                    <CardContent className="p-4 pt-0 bg-muted/30">
                      <ul className="list-disc list-inside space-y-1">
                        {item.activities.map((activity, actIndex) => (
                          <li key={actIndex} className="text-sm md:text-base">
                            {activity}
                          </li>
                        ))}
                      </ul>
                    </CardContent>
                  )}
                </Card>
              ))}
            </div>
          </TabsContent>

          <TabsContent value="adhkar" className="space-y-6">
            <div className="space-y-6">
              <h2 className="text-xl font-bold text-center mb-4">ุงูุฃุฐูุงุฑ ุงูููููุฉ</h2>
              {dailyAdhkar.map((adhkar, index) => (
                <Card key={index} className="overflow-hidden transition-all duration-200 hover:shadow-md">
                  <CardHeader
                    className="cursor-pointer p-4 flex flex-row items-center justify-between"
                    onClick={() => toggleAdhkar(`daily-${index}`)}
                  >
                    <CardTitle className="text-base md:text-lg">{adhkar.title}</CardTitle>
                    {expandedAdhkar[`daily-${index}`] ? (
                      <ChevronUp className="h-5 w-5 text-muted-foreground" />
                    ) : (
                      <ChevronDown className="h-5 w-5 text-muted-foreground" />
                    )}
                  </CardHeader>
                  {expandedAdhkar[`daily-${index}`] && (
                    <CardContent className="p-4 pt-0 bg-muted/30">
                      <ul className="list-disc list-inside space-y-3">
                        {adhkar.items.map((item, itemIndex) => (
                          <li key={itemIndex} className="text-sm md:text-base">
                            {item}
                          </li>
                        ))}
                      </ul>
                    </CardContent>
                  )}
                </Card>
              ))}

              <h2 className="text-xl font-bold text-center mb-4 mt-8">ุฃุฐูุงุฑ ุงูุตููุงุช</h2>
              {prayerAdhkar.map((adhkar, index) => (
                <Card key={index} className="overflow-hidden transition-all duration-200 hover:shadow-md">
                  <CardHeader
                    className="cursor-pointer p-4 flex flex-row items-center justify-between"
                    onClick={() => toggleAdhkar(`prayer-${index}`)}
                  >
                    <CardTitle className="text-base md:text-lg">ุฃุฐูุงุฑ ุตูุงุฉ {adhkar.prayer}</CardTitle>
                    {expandedAdhkar[`prayer-${index}`] ? (
                      <ChevronUp className="h-5 w-5 text-muted-foreground" />
                    ) : (
                      <ChevronDown className="h-5 w-5 text-muted-foreground" />
                    )}
                  </CardHeader>
                  {expandedAdhkar[`prayer-${index}`] && (
                    <CardContent className="p-4 pt-0 bg-muted/30">
                      <ul className="list-disc list-inside space-y-3">
                        {adhkar.adhkar.map((item, itemIndex) => (
                          <li key={itemIndex} className="text-sm md:text-base">
                            {item}
                          </li>
                        ))}
                      </ul>
                    </CardContent>
                  )}
                </Card>
              ))}
            </div>
          </TabsContent>

          <TabsContent value="quran" className="space-y-6">
            <div className="space-y-4">
              <div className="flex items-center justify-between">
                <h2 className="text-xl font-bold">ุฌุฏูู ุฎุชู ุงููุฑุขู ูู ุฑูุถุงู</h2>
                <div className="flex items-center gap-2">
                  <Button
                    variant="outline"
                    size="sm"
                    onClick={() => setCurrentDay(currentDay > 1 ? currentDay - 1 : 1)}
                    disabled={currentDay <= 1}
                  >
                    ุงูุณุงุจู
                  </Button>
                  <span className="text-sm font-medium">ุงูููู {currentDay}/30</span>
                  <Button
                    variant="outline"
                    size="sm"
                    onClick={() => setCurrentDay(currentDay < 30 ? currentDay + 1 : 30)}
                    disabled={currentDay >= 30}
                  >
                    ุงูุชุงูู
                  </Button>
                </div>
              </div>

              <Progress value={(currentDay / 30) * 100} className="h-2 mb-4" />

              <Card className="bg-primary/5 border-primary/20 mb-6">
                <CardHeader className="pb-2">
                  <CardTitle className="text-lg">ูุฑุฏ ุงูููู {currentDay}</CardTitle>
                  <CardDescription>
                    {quranPlan[currentDay - 1].juz} | ุงูุตูุญุงุช: {quranPlan[currentDay - 1].pages}
                  </CardDescription>
                </CardHeader>
                <CardContent>
                  <p className="text-sm md:text-base">{quranPlan[currentDay - 1].surahs}</p>
                </CardContent>
              </Card>

              <div className="grid gap-2">
                {quranPlan.map((day) => (
                  <Card
                    key={day.day}
                    className={`overflow-hidden transition-all duration-200 hover:shadow-md ${day.day === currentDay ? "border-primary" : ""}`}
                  >
                    <CardHeader
                      className="cursor-pointer p-3 flex flex-row items-center justify-between"
                      onClick={() => toggleQuranDay(day.day)}
                    >
                      <div className="flex items-center gap-2">
                        <Badge
                          variant={day.day === currentDay ? "default" : "outline"}
                          className="h-6 w-6 flex items-center justify-center p-0"
                        >
                          {day.day}
                        </Badge>
                        <CardTitle className="text-sm md:text-base">{day.juz}</CardTitle>
                      </div>
                      {expandedQuranDay === day.day ? (
                        <ChevronUp className="h-5 w-5 text-muted-foreground" />
                      ) : (
                        <ChevronDown className="h-5 w-5 text-muted-foreground" />
                      )}
                    </CardHeader>
                    {expandedQuranDay === day.day && (
                      <CardContent className="p-3 pt-0 bg-muted/30">
                        <div className="grid grid-cols-2 gap-2 text-sm">
                          <div>
                            <span className="font-medium">ุงูุตูุญุงุช:</span> {day.pages}
                          </div>
                          <div>
                            <span className="font-medium">ุงูุณูุฑ:</span> {day.surahs}
                          </div>
                        </div>
                      </CardContent>
                    )}
                  </Card>
                ))}
              </div>
            </div>
          </TabsContent>

          <TabsContent value="quran-reader" className="space-y-6">
            <QuranReader />
          </TabsContent>
        </Tabs>
      </div>
    </div>
  )
}

